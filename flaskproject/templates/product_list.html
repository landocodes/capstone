{% extends 'adminbase.html' %}
{% block content %}

<div class="col py-3">
  <h1>Product Table</h1>

  <table id='data' class="table align-middle mb-0 bg-white">
    <thead class="bg-light table-dark">
      <tr>
        
        <th>Item Number</th>
        <th>Product Title</th>
        <th>Department</th>
        <th>Quantity</th>
        <th>Price</th>
        <th style="color:black">          <!-- Button trigger modal -->
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#add">
            Add Product
          </button>
         
<!-- Modal -->
<div class="modal fade" id="add" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Add Product </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form action="" method="POST">
          <div class="mb-4">
            <label for="itemnumber" class="form-label">Item Number</label>
            <input type="text" name="itemnumber"  class="form-control" id="itemnumber">
          </div>

          <div class="mb-4">
            <label for="itemname" class="form-label">Product title</label>
            <input type="text" name="itemname"  class="form-control" id="itemname">
          </div>
  
          <div class="mb-4">
            <label for="department" class="form-label">Department</label>
            <input type="text" name="department"  class="form-control" id="department">
          </div>
  
  
         
          
  
          <div class="mb-4">
            <label for="quantity" class="form-label">Quantity</label>
            <input type="number" name="quantity" class="form-control" id="quantity">
          </div> 
  
  
          <div class="mb-4">
            <label class="price">Price</label>
            <input type="text" name="price" id="price">
          </div>
  
          <div class="mb-4">
            
             
            <label for="Image" class="form-label">Upload Image</label>
            <input name="image" class="form-control" type="file" id="formFile" onchange="preview()">
            <button onclick="clearImage()" class="btn btn-primary mt-3">Delete Image</button>
       
        <img id="frame" src="" class="img-fluid" />
  
    </div>

    <div class="modal-footer">
      <button type="submit" class="btn btn-primary">Add</button>
    </div>
        </form>
      </div>
     
    </div>
  </div>
</div>
        </th>
      </tr>
    </thead>{% for item in data %}
    <tbody>
      <tr>
        
        
        <th scope="row">{{item.Item_Number}}</th>

        <td>
          <p>{{item.Item_Description}}</p>

        </td>
        <td>
          <p>{{item.Department}}</p>
        </td>
        <td>{{item.Qty}}</td>
        <td>{{item.Price}}</td>
        
        <td>
           <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
  Edit
</button>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Update Product Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form action="/update" method="POST">
          <div class="mb-4">
            <label for="product_name" class="form-label">Item Number</label>
            <input type="text" placeholder="{{item.Item_Number}}" class="form-control" name="itemnumber" id="itemnumber">
          </div>
  
          <div class="mb-4">
            <label class="form-label">Item Name</label>
            <input placeholder="{{item.Item_Description}}" name="itemname" class="form-control" rows="4"></input>
          </div>
  
          <div class="mb-4">
            
             
                  <label for="Image" class="form-label">Upload Image</label>
                  <input name="image" class="form-control" type="file" id="formFile" onchange="preview()">
                  <button onclick="clearImage()" class="btn btn-primary mt-3">Delete Image</button>
             
              <img id="frame" src="" class="img-fluid" />
        
          </div>
  
          
  
          <div class="row gx-2">
            <div class="col-sm-6 mb-3">
              <label for="quantity" class="form-label">Quantity</label>
              <input  type="number" id="quantity" name="quantity" class="form-control">
            </div>
            <div class="col-sm-6 mb-3">
              <label for="department" class="form-label">Department</label>
              <input name="department" placeholder="{{item.Qty}}" type="text" name="department" class="form-control">
  
          <div class="mb-4">
            <label class="price">Price</label>
            <input placeholder="{{item.Price}}" type="text" name="price" id="price">
          </div>
  
        
  
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Update</button>
      </div>
    </div>
  </div>
</div>
        </td>
        <td>
          <a href="/delete/{{item.Item_Number}}" class="btn btn-danger btn-xs" href=""
          onclick="return confirm('Are You Sure To Delete ?')">
         Delete
       </a>
        </td>
      </tr>

      {% endfor %}
    </tbody>
  </table>


  {{ pagination.links }}
</div>
<script>
  // if(localStorage.getItem("darkmode")){
  //     var body_el = document.body;
  //     body_el.className += 'dark';
  // }
  function preview() {
              frame.src = URL.createObjectURL(event.target.files[0]);
          }
          function clearImage() {
              document.getElementById('formFile').value = null;
              frame.src = "";
          }
</script>

<script src="js/jquery-3.5.0.min.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>

<!-- Custom JS -->
<script src="js/script.js?v=1.0"></script>
{% endblock %}